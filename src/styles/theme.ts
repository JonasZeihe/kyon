// --- src/styles/theme.ts ---
const clampRem = (min: number, max: number) =>
  `clamp(${min}rem, calc(${min}rem + (${max - min}) * ((100vw - 350px) / 1000)), ${max}rem)`

export const typography = {
  fontFamily: {
    primary: "'Geist','Inter','Segoe UI',Arial,sans-serif",
    secondary: "'Geist','Inter','Segoe UI',Arial,sans-serif",
    button: "'Geist','Inter','Segoe UI',Arial,sans-serif",
  },
  fontSize: {
    h1: clampRem(2.2, 2.9),
    h2: clampRem(1.7, 2.1),
    h3: clampRem(1.26, 1.5),
    h4: clampRem(1.12, 1.22),
    body: clampRem(1.08, 1.18),
    small: clampRem(0.92, 1.0),
  },
  fontWeight: { light: 300, regular: 400, medium: 500, bold: 700 },
  lineHeight: { tight: 1.2, normal: 1.6, relaxed: 1.8 },
  letterSpacing: { tight: '-0.012em', normal: '0', wide: '0.035em' },
}

export const spacing = (f = 1) => `${8 * f}px`
export const spacingHalf = (f = 1) => `${4 * f}px`

export const borderRadius = {
  none: '0',
  small: '0.25rem',
  medium: '0.55rem',
  large: '1rem',
  pill: '9999px',
}

export const boxShadows = {
  light: {
    xs: '0 1px 2px rgba(40,50,80,0.05)',
    sm: '0 2px 6px rgba(60,80,120,0.07)',
    md: '0 4px 14px rgba(60,70,110,0.10)',
    lg: '0 8px 28px rgba(50,60,100,0.12)',
    glow: '0 0 0 2px #5e9fff, 0 4px 22px rgba(120,160,255,0.15)',
  },
  dark: {
    xs: '0 1px 2px rgba(0,0,0,0.35)',
    sm: '0 2px 6px rgba(0,0,0,0.32)',
    md: '0 4px 14px rgba(0,0,0,0.36)',
    lg: '0 8px 28px rgba(0,0,0,0.40)',
    glow: '0 0 0 2px #79e6f5, 0 4px 22px rgba(77,208,225,0.18)',
  },
}

export const breakpoints = {
  xs: '350px',
  sm: '600px',
  md: '900px',
  lg: '1200px',
  xl: '1440px',
  xxl: '1720px',
}

const PALETTES = {
  light: {
    primary: {
      base: '#c41f2a',
      hover: '#a41a24',
      active: '#7c141c',
      disabled: '#f3a3ab',
      border: '#ea6a78',
      surface: '#fff4f5',
      contrast: '#120305',
      0: '#fff7f8',
      1: '#ffe7ea',
      2: '#f3a3ab',
      3: '#ea6a78',
      main: '#c41f2a',
      4: '#a41a24',
      5: '#7c141c',
      6: '#4a0c11',
    },
    secondary: {
      base: '#0ea5ff',
      hover: '#0a84d1',
      active: '#075b95',
      disabled: '#a9d9ff',
      border: '#59bfff',
      surface: '#eef7ff',
      contrast: '#06253a',
      0: '#f0faff',
      1: '#d9f2ff',
      2: '#a9d9ff',
      3: '#59bfff',
      main: '#0ea5ff',
      4: '#0a84d1',
      5: '#075b95',
      6: '#042e4a',
    },
    accent: {
      base: '#ca21b6',
      hover: '#a01392',
      active: '#70126a',
      disabled: '#f0c6eb',
      border: '#db7ad1',
      surface: '#fbeaf9',
      contrast: '#5b0a54',
      0: '#fef0fd',
      1: '#f6d9f5',
      2: '#e99fed',
      3: '#db7ad1',
      main: '#ca21b6',
      4: '#a01392',
      5: '#70126a',
      6: '#45124a',
    },
    highlight: {
      base: '#ffd200',
      hover: '#e6b000',
      active: '#a87100',
      disabled: '#ffe37a',
      border: '#eec23d',
      surface: '#fffbea',
      contrast: '#16171d',
      0: '#fffdf0',
      1: '#fff5d8',
      2: '#ffe37a',
      3: '#eec23d',
      main: '#ffd200',
      4: '#dda100',
      5: '#a87100',
      6: '#664200',
    },
    neutral: {
      background: '#f7f8fb',
      surface: '#ffffff',
      border: '#e4e7ee',
      text: '#16171d',
      textSubtle: '#6f7285',
      inverse: '#ffffff',
      backdrop: '#eef1f6',
    },
    surface: {
      0: '#ffffff',
      1: '#fbfcff',
      2: '#f3f5f9',
      main: '#eceef5',
      4: '#dde0e7',
      5: '#c9cdd8',
      6: '#b3b7c4',
      card: '#ffffff',
      hover: '#f6f8fb',
      backdrop: '#eef1f6',
    },
    depth: {
      0: '#ffffff',
      1: '#f4f6fb',
      2: '#e6e9f3',
      3: '#b8bccb',
      main: '#676b84',
      5: '#3a3d4c',
      6: '#23243a',
      ultraLight: '#f6f8fc',
      dark: '#16171d',
    },
    text: { main: '#16171d', inverse: '#ffffff', subtle: '#6f7285' },
  },
  dark: {
    primary: {
      base: '#ff4a57',
      hover: '#e83642',
      active: '#b4262f',
      disabled: '#ff8b95',
      border: '#ff6671',
      surface: '#2a0f12',
      contrast: '#ffeef0',
      0: '#ffb9c0',
      1: '#ff9aa8',
      2: '#ff8b95',
      3: '#ff6671',
      main: '#ff4a57',
      4: '#e83642',
      5: '#b4262f',
      6: '#7a191f',
    },
    secondary: {
      base: '#2fb6ff',
      hover: '#159be6',
      active: '#0f6ead',
      disabled: '#82d4ff',
      border: '#5cc7ff',
      surface: '#0d1a23',
      contrast: '#e6f5ff',
      0: '#b8e6ff',
      1: '#a9d9ff',
      2: '#82d4ff',
      3: '#5cc7ff',
      main: '#2fb6ff',
      4: '#159be6',
      5: '#0f6ead',
      6: '#0a446d',
    },
    accent: {
      base: '#e54bd6',
      hover: '#c936ba',
      active: '#8c1a82',
      disabled: '#dfa8e6',
      border: '#cf7ddb',
      surface: '#241124',
      contrast: '#ffebfd',
      0: '#eec7f3',
      1: '#dfa8e6',
      2: '#cf7ddb',
      3: '#c15fce',
      main: '#e54bd6',
      4: '#c936ba',
      5: '#8c1a82',
      6: '#5b0a54',
    },
    highlight: {
      base: '#ffbf00',
      hover: '#d99a00',
      active: '#a27000',
      disabled: '#ffd666',
      border: '#f7c133',
      surface: '#332f1c',
      contrast: '#fff8e6',
      0: '#ffeaa3',
      1: '#ffd666',
      2: '#ffc533',
      3: '#f7c133',
      main: '#ffbf00',
      4: '#d99a00',
      5: '#a27000',
      6: '#664700',
    },
    neutral: {
      background: '#0f1116',
      surface: '#171821',
      border: '#232536',
      text: '#f3f6fc',
      textSubtle: '#8f94ab',
      inverse: '#0f1116',
      backdrop: '#0b0c10',
    },
    surface: {
      0: '#0f1116',
      1: '#13141c',
      2: '#171821',
      main: '#171821',
      4: '#232536',
      5: '#2f333d',
      card: '#1b1c22',
      hover: '#22232f',
      backdrop: '#0b0c10',
    },
    depth: {
      0: '#1e2030',
      1: '#23263c',
      2: '#2b2f44',
      3: '#393b49',
      main: '#9ea2b3',
      5: '#e0e1ea',
      6: '#f7f8fa',
      ultraLight: '#22243a',
      dark: '#ffffff',
    },
    text: { main: '#f3f6fc', inverse: '#181926', subtle: '#8f94ab' },
  },
}

const GRADIENTS = {
  rainbow: `linear-gradient(90deg, #c41f2a, #0ea5ff, #ca21b6, #ffd200)`,
  primary: `linear-gradient(135deg, #ea6a78, #c41f2a)`,
  secondary: `linear-gradient(135deg, #59bfff, #0ea5ff)`,
  accent: `linear-gradient(135deg, #db7ad1, #ca21b6)`,
  highlight: `linear-gradient(135deg, #ffe37a, #ffd200)`,
}

const buildSemantic = (c: any) => ({
  bg: c.neutral.background,
  fg: c.text.main,
  mutedFg: c.text.subtle,
  card: c.surface.card,
  surface: c.surface[1],
  surfaceAlt: c.surface[2],
  border: c.neutral.border,
  hover: c.surface.hover,
  focusRing: c.accent[2] || c.secondary[2],
  link: c.primary.main,
  linkHover: c.accent.main,
  success: c.secondary.main,
  warning: c.highlight.main,
  danger: c.primary.main,
  overlay: 'rgba(0,0,0,0.5)',
})

const createTheme = (mode: 'light' | 'dark') => {
  const colors = (PALETTES as any)[mode]
  return {
    mode,
    colors,
    semantic: buildSemantic(colors),
    gradients: GRADIENTS,
    boxShadow: (boxShadows as any)[mode],
    typography,
    spacing,
    spacingHalf,
    borderRadius,
    breakpoints,
    motionSafe: true,
  }
}

export const lightTheme = createTheme('light')
export const darkTheme = createTheme('dark')
export default lightTheme

export type AppTheme = typeof lightTheme

declare module 'styled-components' {
  export interface DefaultTheme extends AppTheme {}
}
