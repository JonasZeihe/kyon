// src/styles/theme.ts
import gradients, { type GradientSet } from './Gradient'

const clamp = (min: number, max: number) =>
  `clamp(${min}, calc(${min} + (${max} - ${min}) * ((100vw - 350px) / 1000)), ${max})`

export const typography = {
  fontFamily: {
    primary: "'Geist','Inter','Segoe UI',Arial,sans-serif",
    secondary: "'Geist','Inter','Segoe UI',Arial,sans-serif",
    button: "'Geist','Inter','Segoe UI',Arial,sans-serif",
  },
  fontSize: {
    h1: clamp(2.2, 2.9),
    h2: clamp(1.7, 2.1),
    h3: clamp(1.26, 1.5),
    h4: clamp(1.12, 1.22),
    body: clamp(1.08, 1.18),
    small: clamp(0.98, 1.05),
  },
  fontWeight: { light: 300, regular: 400, medium: 500, bold: 700 },
  lineHeight: { tight: 1.19, normal: 1.6, relaxed: 1.85 },
  letterSpacing: { tight: '-0.012em', normal: '0', wide: '0.035em' },
}

export const spacing = (f = 1) => `${8 * f}px`
export const spacingHalf = (f = 1) => `${4 * f}px`
export const borderRadius = {
  none: '0',
  small: '0.25rem',
  medium: '0.55rem',
  large: '1rem',
  pill: '9999px',
}
export const boxShadows = {
  light: {
    xs: '0 1px 2px rgba(60,80,120,0.03)',
    sm: '0 2px 6px rgba(80,110,180,0.07)',
    md: '0 4px 14px rgba(70,70,110,0.10)',
    lg: '0 8px 30px rgba(70,90,140,0.10)',
    glow: '0 0 0 2px #5e9fff, 0 4px 22px 0 rgba(150,180,255,0.10)',
  },
  dark: {
    xs: '0 1px 3px rgba(0,0,0,0.28)',
    sm: '0 2px 8px rgba(0,0,0,0.2)',
    md: '0 6px 20px rgba(0,0,0,0.2)',
    lg: '0 12px 36px rgba(0,0,0,0.22)',
    glow: '0 0 0 2px #79e6f5, 0 4px 24px 0 rgba(77,208,225,0.10)',
  },
}
export const breakpoints = {
  xs: '350px',
  sm: '600px',
  md: '900px',
  lg: '1200px',
  xl: '1440px',
  xxl: '1720px',
}

const PALETTES = {
  light: {
    primary: {
      base: '#2f66f5',
      hover: '#2556da',
      active: '#1b43b3',
      disabled: '#a9c2ff',
      border: '#678cec',
      surface: '#eef3ff',
      contrast: '#0b225e',
      0: '#f2f6ff',
      1: '#e6edff',
      2: '#a9c2ff',
      3: '#678cec',
      main: '#3068ff',
      4: '#2556da',
      5: '#1536a2',
      6: '#0b225e',
    },
    secondary: {
      base: '#bf5329',
      hover: '#a6471a',
      active: '#7d330f',
      disabled: '#ffba96',
      border: '#f39269',
      surface: '#fff2ea',
      contrast: '#6c2a10',
      0: '#fff2ea',
      1: '#ffe5d5',
      2: '#ffba96',
      3: '#f39269',
      main: '#c3552a',
      4: '#a6471a',
      5: '#7d330f',
      6: '#4d1e08',
    },
    accent: {
      base: '#c620b2',
      hover: '#a01392',
      active: '#70126a',
      disabled: '#f0c6eb',
      border: '#db7ad1',
      surface: '#fbeaf9',
      contrast: '#5b0a54',
      0: '#fbeaf9',
      1: '#f6d9f5',
      2: '#e99fed',
      3: '#db7ad1',
      main: '#ca21b6',
      4: '#a01392',
      5: '#70126a',
      6: '#45124a',
    },
    highlight: {
      base: '#ffbf00',
      hover: '#e6b000',
      active: '#c19200',
      disabled: '#ffe37a',
      border: '#eec23d',
      surface: '#fffbea',
      contrast: '#16171d',
      0: '#fffbea',
      1: '#fff5d8',
      2: '#ffe37a',
      3: '#eec23d',
      main: '#ffd200',
      4: '#dda100',
      5: '#a87100',
      6: '#664200',
    },
    neutral: {
      background: '#fafafc',
      surface: '#ffffff',
      border: '#e4e7ee',
      text: '#2b2d3a',
      textSubtle: '#7c7f93',
      inverse: '#ffffff',
      backdrop: '#e6e9f0',
    },
    surface: {
      0: '#ffffff',
      1: '#fafbff',
      2: '#f3f5f9',
      main: '#e9ebf2',
      4: '#dde0e7',
      5: '#c9cdd8',
      6: '#b3b7c4',
      card: '#ffffff',
      cardAlpha: 'rgba(255,255,255,0.85)',
      hover: '#f6f8fb',
      backdrop: '#e6e9f0',
    },
    depth: {
      0: '#ffffff',
      1: '#f4f6fb',
      2: '#e6e9f3',
      3: '#b8bccb',
      main: '#676b84',
      5: '#3a3d4c',
      6: '#23243a',
      ultraLight: '#f6f8fc',
      dark: '#16171d',
    },
    text: { main: '#16171d', inverse: '#ffffff', subtle: '#6f7285' },
  },
  dark: {
    primary: {
      base: '#2e60ee',
      hover: '#2b56c0',
      active: '#1d3a86',
      disabled: '#6a97ff',
      border: '#4a79e9',
      surface: '#1e1f2b',
      contrast: '#0f214f',
      0: '#dce7ff',
      1: '#b8d0ff',
      2: '#6a97ff',
      3: '#4a79e9',
      main: '#3068ff',
      4: '#2b56c0',
      5: '#1d3a86',
      6: '#0f214f',
    },
    secondary: {
      base: '#c3542a',
      hover: '#a6471a',
      active: '#7d330f',
      disabled: '#ffa784',
      border: '#f49568',
      surface: '#2c1e1b',
      contrast: '#662b12',
      0: '#ffe5d5',
      1: '#ffd6c2',
      2: '#ffa784',
      3: '#f49568',
      main: '#c3552a',
      4: '#a6471a',
      5: '#7d330f',
      6: '#51210a',
    },
    accent: {
      base: '#c820b2',
      hover: '#a01392',
      active: '#70126a',
      disabled: '#c689d2',
      border: '#b574c3',
      surface: '#2b1c2a',
      contrast: '#45124a',
      0: '#ecd4f0',
      1: '#e3bde5',
      2: '#c689d2',
      3: '#b574c3',
      main: '#ca21b6',
      4: '#a01392',
      5: '#70126a',
      6: '#45124a',
    },
    highlight: {
      base: '#ffbb00',
      hover: '#d99a00',
      active: '#a27000',
      disabled: '#ffd666',
      border: '#f7c133',
      surface: '#332f1c',
      contrast: '#664700',
      0: '#ffeca0',
      1: '#ffd666',
      2: '#ffc533',
      3: '#f7c133',
      main: '#ffbb00',
      4: '#d99a00',
      5: '#a27000',
      6: '#664700',
    },
    neutral: {
      background: '#1a1b25',
      surface: '#22232f',
      border: '#292b38',
      text: '#f0f2ff',
      textSubtle: '#a8abc9',
      inverse: '#16171d',
      backdrop: '#15161b',
    },
    surface: {
      0: '#1a1b25',
      1: '#181922',
      2: '#232536',
      main: '#232536',
      4: '#2f333d',
      5: '#101015',
      card: '#1b1c22',
      cardAlpha: 'rgba(27,28,34,0.82)',
      hover: '#22232f',
      backdrop: '#15161b',
    },
    depth: {
      0: '#1e2030',
      1: '#23263c',
      2: '#2b2f44',
      3: '#393b49',
      main: '#9ea2b3',
      5: '#e0e1ea',
      6: '#f7f8fa',
      ultraLight: '#22243a',
      dark: '#ffffff',
    },
    text: { main: '#f3f6fc', inverse: '#181926', subtle: '#8f94ab' },
  },
}

const createTheme = (mode: 'light' | 'dark') => {
  const colors = (PALETTES as any)[mode]
  return {
    mode,
    colors,
    boxShadow: (boxShadows as any)[mode],
    gradients: gradients({ colors }) as GradientSet,
    typography,
    spacing,
    spacingHalf,
    borderRadius,
    breakpoints,
    motionSafe: true,
  }
}

export const lightTheme = createTheme('light')
export const darkTheme = createTheme('dark')
export default lightTheme

export type AppTheme = typeof lightTheme

declare module 'styled-components' {
  export interface DefaultTheme extends AppTheme {}
}
