---
// src/layouts/PostLayout.astro
import ThemeLayoutIsland from '../components/islands/ThemeLayoutIsland.astro'
const { title = '', description = '' } = Astro.props
---

<ThemeLayoutIsland client:load>
  <article class="post">
    <header class="post-head">
      <slot name="kicker" />
      {title && <h1 class="post-title">{title}</h1>}
      {description && <p class="post-desc">{description}</p>}
      <slot name="meta" />
    </header>

    <slot name="hero" />

    <section class="post-body">
      <slot />
    </section>

    <nav class="post-nav">
      <slot name="nav" />
    </nav>
  </article>
</ThemeLayoutIsland>

<style>
  .post {
    display: grid;
    gap: 22px;
  }
  .post-head {
    display: grid;
    gap: 8px;
  }
  .post-title {
    margin: 0;
    line-height: 1.08;
    font-size: clamp(2rem, 3vw, 2.4rem);
    letter-spacing: -0.012em;
    color: var(--c-text);
  }
  .post-desc {
    margin: 0;
    opacity: 0.9;
    max-width: 68ch;
    color: var(--c-text);
  }
  .post-body {
    display: block;
    max-width: 74ch;
    margin-inline: auto;
  }
  .post-body :where(h2) {
    margin: 24px 0 8px;
    line-height: 1.16;
    font-size: clamp(1.35rem, 2.2vw, 1.6rem);
    letter-spacing: -0.006em;
    color: var(--c-text);
  }
  .post-body :where(h3) {
    margin: 20px 0 6px;
    line-height: 1.2;
    font-size: clamp(1.12rem, 1.8vw, 1.28rem);
    color: var(--c-text);
  }
  .post-body :where(p, ul, ol, blockquote, pre, table) {
    margin: 12px 0;
  }
  .post-body :where(p) {
    opacity: 0.98;
    color: var(--c-text);
  }
  .post-body a {
    color: var(--c-accent);
    text-underline-offset: 3px;
  }
  .post-body blockquote {
    margin: 16px 0;
    padding: 10px 14px;
    border-left: 3px solid var(--c-accent);
    background: color-mix(in oklab, var(--c-surface) 94%, transparent);
  }
  .post-body code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.95em;
    padding: 0.1em 0.35em;
    border-radius: 6px;
    background: color-mix(in oklab, var(--c-surface) 92%, transparent);
    border: 1px solid color-mix(in oklab, var(--c-border) 80%, transparent);
  }
  .post-body pre {
    overflow: auto;
    padding: 14px;
    border-radius: 10px;
    background: color-mix(in oklab, var(--c-surface) 96%, transparent);
    border: 1px solid var(--c-border);
  }
  .post-body hr {
    border: none;
    border-top: 1px solid var(--c-border);
    margin: 20px 0;
  }
  .post-body img {
    border-radius: 10px;
  }
  .post-body table {
    border-collapse: collapse;
    width: 100%;
  }
  .post-body th,
  .post-body td {
    border: 1px solid var(--c-border);
    padding: 8px 10px;
    text-align: left;
  }
  .post-nav {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    max-width: 74ch;
    margin-inline: auto;
  }
</style>
